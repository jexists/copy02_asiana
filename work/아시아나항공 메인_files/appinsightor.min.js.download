(function(){"use strict";function e(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function t(e,t,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=r(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function n(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=m)for(;++n<r;)t(e[n],n,e);else i(e,t)}function r(t){return t=u(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:e(t)}function i(e,t){for(var n in e)v.call(e,n)&&t(e[n],n,e)}function o(t){return null==t?e(t):S.call(t).slice(8,-1)}function a(e,t){var n=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function s(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function l(e,t){var r=null;return n(e,function(n,i){r=t(r,n,i,e)}),r}function u(e){return String(e).replace(/^ +| +$/g,"")}function c(e){function n(t){return l(t,function(t,n){return t||RegExp("\\b"+(n.pattern||s(n))+"\\b","i").exec(e)&&(n.label||n)})}function p(t){return l(t,function(t,n,r){return t||(n[U]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(U)]||RegExp("\\b"+s(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})}function f(t){return l(t,function(t,n){return t||RegExp("\\b"+(n.pattern||s(n))+"\\b","i").exec(e)&&(n.label||n)})}function b(n){return l(n,function(n,r){var i=r.pattern||s(r);return!n&&(n=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(n=t(n,i,r.label||r)),n})}function h(t){return l(t,function(t,n){var i=n.pattern||s(n);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=r(t[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function m(t){return l(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function x(){return this.description||""}var v=d,y=e&&"object"==typeof e&&"String"!=o(e);y&&(v=e,e=null);var w=v.navigator||{},E=w.userAgent||"";e||(e=E);var O,M,P=y?!!w.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(S.toString()),T="Object",k=y?T:"ScriptBridgingProxyObject",I=y?T:"Environment",A=y&&v.java?"JavaPackage":o(v.java),C=y?T:"RuntimeObject",R=/\bJava/.test(A)&&v.java,j=R&&o(v.environment)==I,D=R?"a":"α",_=R?"b":"β",W=v.document||{},B=v.operamini||v.opera,G=g.test(G=y&&B?B["[[Class]]"]:o(B))?G:B=null,F=e,L=[],$=null,X=e==E,N=X&&B&&"function"==typeof B.version&&B.version(),q=n([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),K=f(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),U=h([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),z=p({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),H=b(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(q&&(q=[q]),z&&!U&&(U=h([z])),(O=/\bGoogle TV\b/.exec(U))&&(U=O[0]),/\bSimulator\b/i.test(e)&&(U=(U?U+" ":"")+"Simulator"),"Opera Mini"==K&&/\bOPiOS\b/.test(e)&&L.push("running in Turbo/Uncompressed mode"),"IE"==K&&/\blike iPhone OS\b/.test(e)?(O=c(e.replace(/like iPhone OS/,"")),z=O.manufacturer,U=O.product):/^iP/.test(U)?(K||(K="Safari"),H="iOS"+((O=/ OS ([\d_]+)/i.exec(e))?" "+O[1].replace(/_/g,"."):"")):"Konqueror"!=K||/buntu/i.test(H)?z&&"Google"!=z&&(/Chrome/.test(K)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(U))||/\bAndroid\b/.test(H)&&/^Chrome/.test(K)&&/\bVersion\//i.test(e)?(K="Android Browser",H=/\bAndroid\b/.test(H)?H:"Android"):"Silk"==K?(/\bMobi/i.test(e)||(H="Android",L.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&L.unshift("accelerated")):"PaleMoon"==K&&(O=/\bFirefox\/([\d.]+)\b/.exec(e))?L.push("identifying as Firefox "+O[1]):"Firefox"==K&&(O=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(H||(H="Firefox OS"),U||(U=O[1])):!K||(O=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(K))?(K&&!U&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(O+"/")+8))&&(K=null),(O=U||z||H)&&(U||z||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(H))&&(K=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(H)?H:O)+" Browser")):"Electron"==K&&(O=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&L.push("Chromium "+O):H="Kubuntu",N||(N=m(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",s(K),"(?:Firefox|Minefield|NetFront)"])),(O="iCab"==q&&parseFloat(N)>3&&"WebKit"||/\bOpera\b/.test(K)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(q)&&"WebKit"||!q&&/\bMSIE\b/i.test(e)&&("Mac OS"==H?"Tasman":"Trident")||"WebKit"==q&&/\bPlayStation\b(?! Vita\b)/i.test(K)&&"NetFront")&&(q=[O]),"IE"==K&&(O=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(K+=" Mobile",H="Windows Phone "+(/\+$/.test(O)?O:O+".x"),L.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(K="IE Mobile",H="Windows Phone 8.x",L.unshift("desktop mode"),N||(N=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=K&&"Trident"==q&&(O=/\brv:([\d.]+)/.exec(e))&&(K&&L.push("identifying as "+K+(N?" "+N:"")),K="IE",N=O[1]),X){if(a(v,"global"))if(R&&(O=R.lang.System,F=O.getProperty("os.arch"),H=H||O.getProperty("os.name")+" "+O.getProperty("os.version")),j){try{N=v.require("ringo/engine").version.join("."),K="RingoJS"}catch(V){(O=v.system)&&O.global.system==v.system&&(K="Narwhal",H||(H=O[0].os||null))}K||(K="Rhino")}else"object"==typeof v.process&&!v.process.browser&&(O=v.process)&&("object"==typeof O.versions&&("string"==typeof O.versions.electron?(L.push("Node "+O.versions.node),K="Electron",N=O.versions.electron):"string"==typeof O.versions.nw&&(L.push("Chromium "+N,"Node "+O.versions.node),K="NW.js",N=O.versions.nw)),K||(K="Node.js",F=O.arch,H=O.platform,N=/[\d.]+/.exec(O.version),N=N?N[0]:null));else o(O=v.runtime)==k?(K="Adobe AIR",H=O.flash.system.Capabilities.os):o(O=v.phantom)==C?(K="PhantomJS",N=(O=O.version||null)&&O.major+"."+O.minor+"."+O.patch):"number"==typeof W.documentMode&&(O=/\bTrident\/(\d+)/i.exec(e))?(N=[N,W.documentMode],(O=+O[1]+4)!=N[1]&&(L.push("IE "+N[1]+" mode"),q&&(q[1]=""),N[1]=O),N="IE"==K?String(N[1].toFixed(1)):N[0]):"number"==typeof W.documentMode&&/^(?:Chrome|Firefox)\b/.test(K)&&(L.push("masking as "+K+" "+N),K="IE",N="11.0",q=["Trident"],H="Windows");H=H&&r(H)}if(N&&(O=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(N)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(X&&w.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&($=/b/i.test(O)?"beta":"alpha",N=N.replace(RegExp(O+"\\+?$"),"")+("beta"==$?_:D)+(/\d+\+?/.exec(O)||"")),"Fennec"==K||"Firefox"==K&&/\b(?:Android|Firefox OS)\b/.test(H))K="Firefox Mobile";else if("Maxthon"==K&&N)N=N.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(U))"Xbox 360"==U&&(H=null),"Xbox 360"==U&&/\bIEMobile\b/.test(e)&&L.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(K)&&(!K||U||/Browser|Mobi/.test(K))||"Windows CE"!=H&&!/Mobi/i.test(e))if("IE"==K&&X)try{null===v.external&&L.unshift("platform preview")}catch(V){L.unshift("embedded")}else(/\bBlackBerry\b/.test(U)||/\bBB10\b/.test(e))&&(O=(RegExp(U.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||N)?(O=[O,/BB10/.test(e)],H=(O[1]?(U=null,z="BlackBerry"):"Device Software")+" "+O[0],N=null):this!=i&&"Wii"!=U&&(X&&B||/Opera/.test(K)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==K&&/\bOS X (?:\d+\.){2,}/.test(H)||"IE"==K&&(H&&!/^Win/.test(H)&&N>5.5||/\bWindows XP\b/.test(H)&&N>8||8==N&&!/\bTrident\b/.test(e)))&&!g.test(O=c.call(i,e.replace(g,"")+";"))&&O.name&&(O="ing as "+O.name+((O=O.version)?" "+O:""),g.test(K)?(/\bIE\b/.test(O)&&"Mac OS"==H&&(H=null),O="identify"+O):(O="mask"+O,K=G?r(G.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(O)&&(H=null),X||(N=null)),q=["Presto"],L.push(O));else K+=" Mobile";(O=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(O=[parseFloat(O.replace(/\.(\d)$/,".0$1")),O],"Safari"==K&&"+"==O[1].slice(-1)?(K="WebKit Nightly",$="alpha",N=O[1].slice(0,-1)):N!=O[1]&&N!=(O[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(N=null),O[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==O[0]&&537.36==O[2]&&parseFloat(O[1])>=28&&"WebKit"==q&&(q=["Blink"]),X&&(P||O[1])?(q&&(q[1]="like Chrome"),O=O[1]||(O=O[0],O<530?1:O<532?2:O<532.05?3:O<533?4:O<534.03?5:O<534.07?6:O<534.1?7:O<534.13?8:O<534.16?9:O<534.24?10:O<534.3?11:O<535.01?12:O<535.02?"13+":O<535.07?15:O<535.11?16:O<535.19?17:O<536.05?18:O<536.1?19:O<537.01?20:O<537.11?"21+":O<537.13?23:O<537.18?24:O<537.24?25:O<537.36?26:"Blink"!=q?"27":"28")):(q&&(q[1]="like Safari"),O=O[0],O=O<400?1:O<500?2:O<526?3:O<533?4:O<534?"4+":O<535?5:O<537?6:O<538?7:O<601?8:"8"),q&&(q[1]+=" "+(O+="number"==typeof O?".x":/[.+]/.test(O)?"":"+")),"Safari"==K&&(!N||parseInt(N)>45)&&(N=O)),"Opera"==K&&(O=/\bzbov|zvav$/.exec(H))?(K+=" ",L.unshift("desktop mode"),"zvav"==O?(K+="Mini",N=null):K+="Mobile",H=H.replace(RegExp(" *"+O+"$"),"")):"Safari"==K&&/\bChrome\b/.exec(q&&q[1])&&(L.unshift("desktop mode"),K="Chrome Mobile",N=null,/\bOS X\b/.test(H)?(z="Apple",H="iOS 4.3+"):H=null),N&&0==N.indexOf(O=/[\d.]+$/.exec(H))&&e.indexOf("/"+O+"-")>-1&&(H=u(H.replace(O,""))),q&&!/\b(?:Avant|Nook)\b/.test(K)&&(/Browser|Lunascape|Maxthon/.test(K)||"Safari"!=K&&/^iOS/.test(H)&&/\bSafari\b/.test(q[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(K)&&q[1])&&(O=q[q.length-1])&&L.push(O),L.length&&(L=["("+L.join("; ")+")"]),z&&U&&U.indexOf(z)<0&&L.push("on "+z),U&&L.push((/^on /.test(L[L.length-1])?"":"on ")+U),H&&(O=/ ([\d.+]+)$/.exec(H),M=O&&"/"==H.charAt(H.length-O[0].length-1),H={architecture:32,family:O&&!M?H.replace(O[0],""):H,version:O?O[1]:null,toString:function(){var e=this.version;return this.family+(e&&!M?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(O=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(F))&&!/\bi686\b/i.test(F)?(H&&(H.architecture=64,H.family=H.family.replace(RegExp(" *"+O),"")),K&&(/\bWOW64\b/i.test(e)||X&&/\w(?:86|32)$/.test(w.cpuClass||w.platform)&&!/\bWin64; x64\b/i.test(e))&&L.unshift("32-bit")):H&&/^OS X/.test(H.family)&&"Chrome"==K&&parseFloat(N)>=39&&(H.architecture=64),e||(e=null);var J={};return J.description=e,J.layout=q&&q[0],J.manufacturer=z,J.name=K,J.prerelease=$,J.product=U,J.ua=e,J.version=K&&N,J.os=H||{architecture:null,family:null,version:null,toString:function(){return"null"}},J.parse=c,J.toString=x,J.version&&L.unshift(N),J.name&&L.unshift(K),H&&K&&(H!=String(H).split(" ")[0]||H!=K.split(" ")[0]&&!U)&&L.push(U?"("+H+")":"on "+H),L.length&&(J.description=L.join(" ")),J}var p={"function":!0,object:!0},d=p[typeof window]&&window||this,f=p[typeof exports]&&exports,b=p[typeof module]&&module&&!module.nodeType&&module,h=f&&b&&"object"==typeof global&&global;!h||h.global!==h&&h.window!==h&&h.self!==h||(d=h);var m=Math.pow(2,53)-1,g=/\bOpera/,x=Object.prototype,v=x.hasOwnProperty,S=x.toString,y=c();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(d.platform=y,define(function(){return y})):f&&b?i(y,function(e,t){f[t]=e}):d.platform=y}).call(this),!function(e){e.AIAjax=function(e){function t(e){return function(){return this.hasOwnProperty(e+"_")?this[e+"_"]:this.xhr[e]}}function n(t){return function(n){var r=this.xhr,i=this;return 0!=t.indexOf("on")?void(this[t+"_"]=n):void(e[t]?r[t]=function(){e[t](i)||n.apply(r,arguments)}:r[t]=n)}}function r(t){return function(){var n=[].slice.call(arguments);if(!e[t]||!e[t].call(this,n,this.xhr))return this.xhr[t].apply(this.xhr,n)}}return!!window.XMLHttpRequest&&(window._realxhr=window._realxhr||XMLHttpRequest,XMLHttpRequest=function(){this.xhr=new window._realxhr;for(var e in this.xhr){var i="";try{i=typeof this.xhr[e]}catch(o){}"function"===i?this[e]=r(e):Object.defineProperty(this,e,{get:t(e),set:n(e)})}},window._realxhr)},e.unAIAjax=function(){window._realxhr&&(XMLHttpRequest=window._realxhr),window._realxhr=void 0}}(window),function(e,t){var n="1.2.7",r="0.2",i=0,o=function(e,t){for(var n in t)"segmentation"===n?(i++,void 0===e[n]&&(e[n]={}),o(e[n],t[n])):{}.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a=function(e,t){for(var n=0;n<t.length;n++)o(e,t[n])},s=function(e){for(var n=e+"=",r=t.cookie.split(";"),i=0;i<r.length;i++){for(var o=r[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return""},l=function(e){var t=[];for(var n in e)"wfc"===n?t.push(encodeURIComponent(n)+"="+encodeURIComponent(JSON.stringify(e[n]))):t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},u=function(e){return parseFloat(e.toFixed(2))},c=function(e){for(var t in e)e.hasOwnProperty(t)&&((e[t]>864e5||e[t]<0)&&(e[t]=0),e[t]>0&&(e[t]=u(e[t])))},p=function(){return{user_end_time:parseInt((new Date).getTime()/1e3,10)}},d=function(e,t){var n=e;return n+=(n.split("?")[1]?"&":"?")+t},f=function(e){return parseInt(e.toString().replace(".",1),10)},b=function(e){this._seed=e%2147483647,this._seed<=0&&(this._seed+=2147483646)};b.prototype.next=function(e,t){return this._seed=16807*this._seed%2147483647,f(0===arguments.length?this._seed/2147483647:1===arguments.length?this._seed/2147483647*e:this._seed/2147483647*(t-e)+e)};var h=function(n,r){var i=document;"object"==typeof e&&"object"==typeof e.document&&(i=e.document);var o=t.createElement("IMG"),a=t.getElementsByTagName("head")[0];o.src=n+"?"+l(r)+"&"+(new Date).getTime(),o.width=1,o.height=1,o.style.left="0px",o.style.position="absolute",o.style.display="none",o.onload=function(){a.removeChild(o)},a.appendChild(o)},m=function(e){if(e){var t="{",n=Object.keys(e).length-1,r=0;for(var i in e){if("segmentation"===i){t+='"'+i+'":{';var o=Object.keys(e[i]).length-1,a=0;for(var s in e[i])t+='"'+s+'":"'+(void 0===e[i][s]?"":e[i][s])+'"',o!==a&&(t+=","),a++;t+="}"}else t+='"'+i+'":"'+(void 0===e[i]?"":e[i])+'"';n!==r&&(t+=","),r++}return t+="}"}},g=function(t){void 0!==e.AppinsightorAndroid&&void 0!==e.AppinsightorAndroid.recordEvent&&e.AppinsightorAndroid.recordEvent(m(t))},x=function(e){if(e){var t="appinsightorIosRecordEvent://";t+=m(e),window.location.href=t}},v=function(t,n){var r=window.navigator.userAgent.toLowerCase(),i=void 0!==e.AppinsightorAndroid,o=/safari/.test(r),a=/iphone|ipod|ipad/.test(r);return i&&"android"===t.os&&"android browser"===t.wb?n?"AW":"W":!o&&a&&"ios"===t.os&&"safari"===t.wb?n?"IW":"W":"B"},S=function(e,t){var n=e.uri;!n||n.length<1||(e["native"]&&e["native"].use?"AW"===v(t,!0)?g(t):"IW"===v(t,!0)?x(t):(t.segmentation&&delete t.segmentation,h(n,t)):h(n,t))},y=function(e){if(e)return e.indexOf("http")===-1&&(e="/"===e.substr(0,1)?location.protocol+"//"+location.host+e:location.protocol+"//"+location.host+"/"+e),e},w={get:function(){var t={};if(e.performance&&e.performance.timing){var n=e.performance.timing;if(0===n.loadEventEnd)return!1;t.pr=0===n.redirectStart?0:n.redirectEnd-n.redirectStart,t.pa=n.domainLookupStart-n.fetchStart,t.pl=n.domainLookupEnd-n.domainLookupStart,t.pc=n.connectEnd-n.connectStart,t.ps=n.responseStart-n.requestStart,t.pv=n.responseEnd-n.responseStart,t.pd=n.domComplete-n.responseEnd,t.po=n.loadEventEnd-n.loadEventStart,t.pt=t.pr+t.pa+t.pl+t.pc+t.ps+t.pv+t.pd+t.po,c(t)}return t}},E={category:function(e){if(e&&e.length>0)for(var n=t.getElementsByTagName("meta"),r=0;r<n.length;r++)if(n[r].getAttribute("name")&&n[r].getAttribute("name")===e)return n[r].getAttribute("content");return""},session:function(e){if(!e)return!1;var t=e.type||"cookie",n=e.value;if(!n)return!1;switch(t){case"cookie":n=s(n);break;case"value":}return n},get:function(n){var r={};return r.rr=e.location.href,r.referrer=t.referrer,r.lang=navigator.language||"unknown",r.c=this.category(n.category)||"",r.ss=this.session(n.session)||"",r}},O={get:function(t){var n={},r=e.platform;if(n.os=null===r.os.family?"unknown":r.os.family.toLowerCase(),n.osg=null===r.os.family?"other":this.getOsGroup(r.os.family),n.osv=null===r.os.version?"":r.os.version,n.arch=null===r.os.architecture?32:r.os.architecture,n.wb=null===r.name?"unknown":r.name.toLowerCase(),n.wbv=null===r.version?"unknown":r.version.toLowerCase(),n.wbg=null===r.name?"other":this.getBrowserGroup(r.name),n.le=null===r.layout?"unknown":r.layout.toLowerCase(),n.leg=null===r.layout?"other":this.getLayoutEngineGroup(r.layout),n.dd=null===r.product?"unknown":r.product,n.ddg=this.getDeviceGroup(r),n.browsing_type=v(n),t)for(var i in t)n[i]=t[i];return n},getDeviceGroup:function(e){var t=e.manufacturer,n=e.product;return null!==e.os.family&&e.os.family.toLowerCase().indexOf("android")>-1?"mobile":null===t&&null===n?"pc":/(iPad)/i.exec(n)?"tablet":/(Tablet)/i.exec(e.ua)?"tablet":(/(iPhone)/i.exec(n),"mobile")},getLayoutEngineGroup:function(e){return/(\bWebKit\b|\bGecko\b|\bTrident\b|\bBlink\b|\bPresto\b)/i.exec(e)?e.toLowerCase():"other"},getBrowserGroup:function(e){return/IE/i.exec(e)?"msie":/Chrome/i.exec(e)?"chrome":/(Firefox|Mozilla)/i.exec(e)?"firefox":/(Opera)/i.exec(e)?"opera":/(Safari)/i.exec(e)?"safari":/(Edge)/i.exec(e)?"edge":"other"},getOsGroup:function(e){return/Windows/i.exec(e)?"windows":/(Android)/i.exec(e)?"android":/(iOS)/i.exec(e)?"ios":/(Mac|OS X|PowerPC)/i.exec(e)?"macos":/(nbuntu|Linux|Cent|Suse|Red.*hat|Debian|Gentoo|Cygwin)/i.exec(e)?"linux":/(Unix|BSD|AIX|HP-UX|Solaris)/i.exec(e)?"macos":"other"}},M={get:function(e){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e({geo:t.coords.latitude.toString()+","+t.coords.longitude.toString()})},function(t){e("")})}},P=function(e,t){this.txid="",this.uuid=e||"",this.ajaxMethod=t[0]||"",this.ajaxUrl=t[1]||"",this.ajaxStart=(new Date).getTime(),this.ajaxLoad=null,this.ajaxEnd=null,this.callCount=0,this.perf={pr:0,pa:0,pl:0,pc:0,ps:0,pv:0,pd:0,po:0,pt:0}},T=function(t,n,r,i,o,a,s,l,u){this.opt=t||{},this.svcDataRes=n||{},this.agentData=r||{},this.params=i||{},this.locationData=o||{},this.countryInfo=a||{},this.debug_ip=s||"",this.customData=u||"",this.E2E=l||{},this.requests=[],this.eumStr="n$eum=",this.prng=new b((new Date).getTime());var c=this;e.customOverriding=this.customOverriding.bind(this);var p=function(e,t){if(e)for(var n in t)if(t.hasOwnProperty(n)&&t[n].uuid&&t[n].uuid===e.xhr.guid)return t[n]},f=function(e){var t=p(e,c.requests);void 0!==t&&(null===t.ajaxLoad&&(t.perf.ps=(new Date).getTime()-t.ajaxStart,t.ajaxLoad=(new Date).getTime()),4===e.xhr.readyState&&(200===e.xhr.status?(t.perf.pv=(new Date).getTime()-t.ajaxLoad,t.ajaxEnd=(new Date).getTime(),t.perf.pt=t.ajaxEnd-t.ajaxStart,(c.opt.xhr&&c.opt.xhr.use||c.opt.E2E&&c.opt.E2E.use)&&c.runResource(t)):(t.perf.pv=(new Date).getTime()-t.ajaxLoad,t.ajaxEnd=(new Date).getTime(),t.perf.pt=t.ajaxEnd-t.ajaxStart,c.opt.onerror&&c.runResource(t,e.xhr.status))))};AIAjax({onreadystatechange:function(e){f(e)},onload:function(e){f(e)},open:function(e,t){var n=c.prng.next((new Date).getTime());t.guid=n;var r=new P(n,e);c.opt.E2E&&c.opt.E2E.use&&(r.txid=c.E2E.txid,e[1]=d(e[1],c.eumStr+n)),c.requests.push(r)}})};T.prototype.customOverriding=function(e){this.customData={segmentation:e}},T.prototype.initAjaxParam=function(e){if(e)for(var t in this.requests)this.requests.hasOwnProperty(t)&&this.requests[t].uuid===e.uuid&&this.requests.splice(this.requests[t],1)},T.prototype.runResource=function(e,t){if(e){e.ajaxUrl=y(e.ajaxUrl);var n=e.ajaxUrl,r=this.opt.xhr&&this.opt.xhr.filters||[],i=this,o=function(){var n={},r=p(),o={};if(i.opt.E2E&&i.opt.E2E.use&&(e.txid&&""!==e.txid&&(o.txid=e.txid),e.uuid&&""!==e.uuid&&(o.uuid=e.uuid)),c(e.perf),a(n,[{category:"ajax"},i.svcDataRes,i.agentData,i.params,i.locationData,i.countryInfo,i.debug_ip,o,e.perf,r,i.customData]),void 0!==t){var s={error:t,url:e.ajaxUrl};a(n,[s])}n.rr=e.ajaxUrl,n.method=e.ajaxMethod,S(i.opt,n),i.initAjaxParam(e)};if(r.length>0)for(var s=0;s<r.length;s++){var l=r[s];l instanceof RegExp?null!==n.match(l)&&o():"string"==typeof l&&n.indexOf(l)>-1&&o()}else o();return this}};var k=function(t){!function(t,i){t.retryTime=500,t.lastResourceIndex=0,t.req=i||{},t.lastMaxStartTime=0,t.conf=i.opt,t.conf.uri=i.uri,t.params={},t.params.t=i.trackId,t.params.v=n,t.params.cv=r,t.svcData=E.get(t.conf),t.agentData=O.get(i.opt.debugAgentInfo),t.svcDataRes=E.get(t.conf),i.opt.location&&M.get(function(e){t.locationData=e}),t.E2E={},t.userEndTime=0,t.ajaxRequests=null,i.opt.E2E&&i.opt.E2E.use&&"${n$apm}"!==i.opt.E2E.n$apm&&(t.E2E.txid=i.opt.E2E.n$apm),i.opt.countryInfo&&(t.countryInfo={debug_country:i.opt.countryInfo}),i.opt.debug_ip&&(t.debug_ip={debug_ip:i.opt.debug_ip}),i.opt.customData&&(t.customData={segmentation:i.opt.customData}),(i.opt.xhr&&i.opt.xhr.use||i.opt.E2E&&i.opt.E2E.use||(i.opt.E2E||i.opt.xhr)&&i.opt.onerror)&&(t.ajaxRequests=new T(t.conf,t.svcDataRes,t.agentData,t.params,t.locationData,t.countryInfo,t.debug_ip,t.E2E,t.customData)),i.opt.onerror&&(e.onerror=function(e,n,r,i,o){var a="";o&&o.stack&&(a=o.stack.replace(/\n/g," %0A")),""===a&&(a=e);var s={msg:e,url:n,lineNo:r,columnNo:i,error:a};return t.runError(s),!1}),e.recordEvent=t.recordEvent.bind(t)}(this,t)};k.prototype.recordEvent=function(e){this.customData={segmentation:e};var t={};this.userEndTime=p(),a(t,[{category:"browser"},this.svcDataRes,this.agentData,this.params,this.locationData,this.countryInfo,this.debug_ip,this.E2E,this.userEndTime,this.customData]),S(this.conf,t)},k.prototype.getEntries=function(t,n){var r=e.performance.getEntriesByType("resource"),i=r.length,o=[],a=3e3;if(void 0!==t.down_entries.limit_sec){var s=t.down_entries.limit_sec;a="number"!=typeof s||s<1?1e3:1e3*s}if(a>n.pt)return o;var l=100;if(void 0!==t.down_entries.limit_percent){var s=t.down_entries.limit_percent;l="number"!=typeof s||s<10||s>100?10:s}for(var u=n.pt*(l/100),c=["xmlhttprequest"],p=0;p<i;p++){var d=r[p],f=d.startTime>0?parseInt(d.responseEnd-d.startTime,10):0;if(f>=u&&c.indexOf(d.initiatorType)===-1){var b={name:d.name,type:d.initiatorType,time:f,start:parseFloat(d.startTime.toFixed(2)),size:d.transferSize};o.push(b)}}return o.sort(function(e,t){return e.time<t.time?1:e.time>t.time?-1:0}),o},k.prototype.runError=function(e){if(window&&window.Date){var t=this,n=e.msg.toLowerCase(),r="script error";t.wfc=[],n.indexOf(r)>-1&&(e.msg=n),e.url&&(e.url=t.svcDataRes.rr);var i={};return t.userEndTime=p(),a(i,[{category:"browser"},e,t.svcDataRes,t.agentData,t.params,t.locationData,t.countryInfo,t.debug_ip,t.E2E,t.userEndTime,t.customData]),S(this.conf,i),this}},k.prototype.run=function(){var t=this,n=w.get();if(!n)return void setTimeout(function(){t.run()},t.retryTime);var r={};t.conf.down_entries&&t.conf.down_entries.use&&void 0!==e.performance.getEntriesByType&&(r.wfc=t.getEntries(t.conf,n)),t.userEndTime=p(),a(r,[{category:"browser"},n,t.svcDataRes,t.agentData,t.params,t.locationData,t.countryInfo,t.debug_ip,t.E2E,t.userEndTime,t.customData]),S(this.conf,r)},function(){var t=null,n=function(){if(t=setTimeout(function(){n()},1e3),e.ne&&e.ne.l&&e.ne.l instanceof Array)for(;e.ne.l.length>0;){clearTimeout(t);var r=e.ne.l.pop(),i=new k(r);i.run()}};n()}()}(window,document);